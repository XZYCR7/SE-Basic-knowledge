# 名词解释
## TCP
面向连接的，可靠的，基于字节流的传输层通信协议。
## UDP
用户数据报协议 不可靠的连接

## 端口
设备与外界通讯交流的出口

## 套接字
网络通信过程中端点的抽象表示

# 协议数据单元
UDP用户数据报
TCP报文段

# 传输层作用
进程之间的通信

# 运输层 网络层通信区别
运输层提供的端到端的通信服务层次，提供可靠，以及非可靠的连接
网络层，用于传送数据，提供的是不可靠的传送

# 端口的含义
用于进行进程之间的通信

# 面向报文 面向流
面向报文，是把上层交付下来的报文，添加首部以后直接交付给网络层，既不拆分，也不合并。

面向流，把上层交付下的报文的看成一连串的无结构的字节流。然后使用滑动窗口算法进行发送。

# TCP报文段格式
1. 源端口和目的端口 占用两个字节
2. 序号 传送的字节流按照序号标号。
3. 确认号 期望收到对方下一个报文段的第一个数据字节的序号。
4. 数据偏移 起始到该出有多远
5. 保留
6. 紧急 
7. 确认
8. 推送
9. 复位 RST
10. 同步SYN 
11. 终止 FIN
12. 窗口  发送和接收的窗口
13 校验
14. 紧急指针
15. 选项

# 滑动窗口工作过程
传输的每个部分被分配唯一的连续序列号，接收方使用数字并以正确的顺序放置接收到的数据包，丢弃重复的数据包并识别丢失的数据。
协议中规定，对于窗口内未经确认的分组需要重传。这种分组的数量最多可以等于发送窗口的大小，即滑动窗口的大小n减去1（因为发送窗口不可能大于（n-1），起码接收窗口要大于等于1）。
# 流量控制的目的
在网口发生拥塞时，传输系统将通知业务系统减少新业务的接入保证现有业务的质量。也就是控制传输各个接口的负荷，采用了流控机制后，传输上消息过载后，系统会对这些消息进行丢弃处理，保障系统的安全。
# 利用滑动窗口实现流量控制
缩小窗口

# 拥塞控制
拥塞控制是一种用来调整传输控制协议（TCP）连接单次发送的分组数量（单次发送量，在英文文献和程序代码中常叫做cwnd）的算法。它通过增减单次发送量逐步调整，使之逼近当前网络的承载量。如果单次发送量为1，此协议就退化为停等协议。单次发送量是以字节来做单位的；但是如果假设TCP每次传输都是按照最大报文段来发送数据的，那么也可以把数据包个数当作单次发送量的单位，所以有时我们说单次发送量增加1也就是增加相当于1个最大报文段的字节数。

# 三次握手 四次挥手
## 三次握手
第一次握手(SYN=1, seq=x):

客户端发送一个 TCP 的 SYN 标志位置1的包，指明客户端打算连接的服务器的端口，以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。

发送完毕后，客户端进入 SYN_SEND 状态。

第二次握手(SYN=1, ACK=1, seq=y, ACKnum=x+1):

服务器发回确认包(ACK)应答。即 SYN 标志位和 ACK 标志位均为1。服务器端选择自己 ISN 序列号，放到 Seq 域里，同时将确认序号(Acknowledgement Number)设置为客户的 ISN 加1，即X+1。 发送完毕后，服务器端进入 SYN_RCVD 状态。

第三次握手(ACK=1，ACKnum=y+1)

客户端再次发送确认包(ACK)，SYN 标志位为0，ACK 标志位为1，并且把服务器发来 ACK 的序号字段+1，放在确定字段中发送给对方，并且在数据段放写ISN的+1

发送完毕后，客户端进入 ESTABLISHED 状态，当服务器端接收到这个包时，也进入 ESTABLISHED 状态，TCP 握手结束。

## 四次挥手
（1） TCP客户端发送一个FIN，用来关闭客户到服务器的数据传送。
（2） 服务器收到这个FIN，它发回一个ACK，确认序号为收到的序号加1。和SYN一样，一个FIN将占用一个序号。
（3） 服务器关闭客户端的连接，发送一个FIN给客户端。
（4） 客户端发回ACK报文确认，并将确认序号设置为收到序号加1。


